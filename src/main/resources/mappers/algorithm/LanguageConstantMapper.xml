<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.or.kosa.backend.algorithm.mapper.LanguageConstantMapper">

    <!-- ResultMap: LanguageConstant 매핑 -->
    <resultMap id="LanguageConstantResultMap" type="kr.or.kosa.backend.algorithm.domain.LanguageConstant">
        <id property="languageName" column="LANGUAGE_NAME"/>
        <result property="languageType" column="LANGUAGE_TYPE" 
                javaType="kr.or.kosa.backend.algorithm.domain.LanguageType"/>
        <result property="timeFactor" column="TIME_FACTOR"/>
        <result property="timeAddition" column="TIME_ADDITION"/>
        <result property="memoryFactor" column="MEMORY_FACTOR"/>
        <result property="memoryAddition" column="MEMORY_ADDITION"/>
    </resultMap>

    <!-- 전체 언어 상수 조회 (캐싱용) -->
    <select id="selectAll" resultMap="LanguageConstantResultMap">
        SELECT LANGUAGE_NAME,
               LANGUAGE_TYPE,
               TIME_FACTOR,
               TIME_ADDITION,
               MEMORY_FACTOR,
               MEMORY_ADDITION
        FROM LANGUAGE_CONSTANTS
        ORDER BY LANGUAGE_NAME
    </select>

    <!-- 언어명으로 조회 -->
    <select id="selectByLanguageName" resultMap="LanguageConstantResultMap">
        SELECT LANGUAGE_NAME,
               LANGUAGE_TYPE,
               TIME_FACTOR,
               TIME_ADDITION,
               MEMORY_FACTOR,
               MEMORY_ADDITION
        FROM LANGUAGE_CONSTANTS
        WHERE LANGUAGE_NAME = #{languageName}
    </select>

    <!-- 언어 유형별 조회 -->
    <select id="selectByLanguageType" resultMap="LanguageConstantResultMap">
        SELECT LANGUAGE_NAME,
               LANGUAGE_TYPE,
               TIME_FACTOR,
               TIME_ADDITION,
               MEMORY_FACTOR,
               MEMORY_ADDITION
        FROM LANGUAGE_CONSTANTS
        WHERE LANGUAGE_TYPE = #{languageType}
        ORDER BY LANGUAGE_NAME
    </select>

    <!-- 언어 상수 삽입 -->
    <insert id="insert">
        INSERT INTO LANGUAGE_CONSTANTS (
            LANGUAGE_NAME,
            LANGUAGE_TYPE,
            TIME_FACTOR,
            TIME_ADDITION,
            MEMORY_FACTOR,
            MEMORY_ADDITION
        ) VALUES (
            #{languageName},
            #{languageType},
            #{timeFactor},
            #{timeAddition},
            #{memoryFactor},
            #{memoryAddition}
        )
    </insert>

    <!-- 언어 상수 업데이트 -->
    <update id="update">
        UPDATE LANGUAGE_CONSTANTS
        SET LANGUAGE_TYPE = #{languageType},
            TIME_FACTOR = #{timeFactor},
            TIME_ADDITION = #{timeAddition},
            MEMORY_FACTOR = #{memoryFactor},
            MEMORY_ADDITION = #{memoryAddition}
        WHERE LANGUAGE_NAME = #{languageName}
    </update>

    <!-- 언어 상수 삭제 -->
    <delete id="deleteByLanguageName">
        DELETE FROM LANGUAGE_CONSTANTS
        WHERE LANGUAGE_NAME = #{languageName}
    </delete>

</mapper>

